%% Theorems, Lemmas, and Corollaries
\setlength\theoremindent{1\parindent}
\setlength\theorempreskipamount{1\baselineskip}
\setlength\theorempostskipamount{1\baselineskip}
\theoremstyle{break}
\theorembodyfont{\normalfont}
\theoremsymbol{\ensuremath{_\Box}}
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemmaB}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
%% Definitions
\theoremsymbol{}
\newtheorem{definition}[theorem]{Definition}
%% Anonymous Lemmas
\theoremstyle{plain}
\theorembodyfont{\normalfont}
\theoremsymbol{\ensuremath{_\Box}}
\newtheorem{lemma}[theorem]{Lemma}
%% Proofs
\theoremstyle{nonumberplain}
\theoremheaderfont{\normalfont\itshape}
\theoremsymbol{\ensuremath{_\blacksquare}}
\newtheorem{proof}{Proof.}


%% Proof Tree Syntax:
\usepackage{bussproofs}
\EnableBpAbbreviations

\newcommand{\tm}[1]{\textcolor{red}{\ensuremath{#1}}}
\newcommand{\ty}[1]{\textcolor{blue}{\ensuremath{#1}}}
\newcommand{\seq}[2][]{\ensuremath{\tm{#1}\vdash\ty{#2}}}
\newcommand{\reducesto}[2]{\ensuremath{\tm{#1}\Longrightarrow\tm{#2}}}
\newcommand{\tmty}[2]{\ensuremath{\tm{#1}\colon\!\ty{#2}}}
\newcommand{\NOM}[1]{\RightLabel{\textsc{#1}}}
\newcommand{\SYM}[1]{\RightLabel{\ensuremath{#1}}}
\newenvironment{prooftree*}{\leavevmode\hbox\bgroup}{\DisplayProof\egroup}
\newenvironment{scprooftree}[1][1]%
  {\gdef\scalefactor{#1}\begin{center}\proofSkipAmount \leavevmode}%
  {\scalebox{\scalefactor}{\DisplayProof}\proofSkipAmount \end{center} }
\newenvironment{scprooftree*}[1][1]%
  {\gdef\scalefactor{#1} \leavevmode\hbox\bgroup}

%% Typing Judgement:
\newcommand{\cpInfAx}{%
  \begin{prooftree*}
    \AXC{$\vphantom{\seq[ Q ]{ \Delta, \tmty{y}{A^\bot} }}$}
    \NOM{Ax}
    \UIC{$\seq[ \cpLink{x}{y} ]{ \tmty{x}{A}, \tmty{y}{A^\bot} }$}
  \end{prooftree*}}
\newcommand{\cpInfCut}{%
  \begin{prooftree*}
    \AXC{$\seq[ P ]{ \Gamma, \tmty{x}{A} }$}
    \AXC{$\seq[ Q ]{ \Delta, \tmty{y}{A^\bot} }$}
    \NOM{Cut}
    \BIC{$\seq[ \cpCut{x}{P}{Q} ]{ \Gamma, \Delta }$}
  \end{prooftree*}}
\newcommand{\cpInfTens}{%
  \begin{prooftree*}
    \AXC{$\seq[ P ]{ \Gamma , \tmty{y}{A} }$}
    \AXC{$\seq[ Q ]{ \Delta , \tmty{x}{B} }$}
    \SYM{(\tens)}
    \BIC{$\seq[ \cpSend{x}{y}{P}{Q} ]{ \Gamma , \Delta , \tmty{x}{A \tens B} }$}
  \end{prooftree*}}
\newcommand{\cpInfParr}{%
  \begin{prooftree*}
    \AXC{$\seq[ P ]{ \Gamma , \tmty{y}{A} , \tmty{x}{B} }$}
    \SYM{(\parr)}
    \UIC{$\seq[ \cpRecv{x}{y}{P} ]{ \Gamma , \tmty{x}{A \parr B} }$}
  \end{prooftree*}}
\newcommand{\cpInfOne}{%
  \begin{prooftree*}
    \AXC{$\vphantom{\seq[ P ]{ \Gamma }}$}
    \SYM{(\one)}
    \UIC{$\seq[ \cpHalt{x} ]{ \tmty{x}{\one} }$}
  \end{prooftree*}}
\newcommand{\cpInfBot}{%
  \begin{prooftree*}
    \AXC{$\seq[ P ]{ \Gamma }$}
    \SYM{(\bot)}
    \UIC{$\seq[ \cpWait{x}{P} ]{ \Gamma , \tmty{x}{\bot} }$}
  \end{prooftree*}}
\newcommand{\cpInfPlus}[1]{%
  \ifdim#1pt=1pt
  \begin{prooftree*}
    \AXC{$\seq[ P ]{ \Gamma , \tmty{x}{A} }$}
    \SYM{(\plus_1)}
    \UIC{$\seq[{ \cpInl{x}{P} }]{ \Gamma , \tmty{x}{A \plus B} }$}
  \end{prooftree*}
  \else%
  \ifdim#1pt=2pt
  \begin{prooftree*}
    \AXC{$\seq[ P ]{ \Gamma , \tmty{x}{B} }$}
    \SYM{(\plus_2)}
    \UIC{$\seq[ \cpInr{x}{P} ]{ \Gamma , \tmty{x}{A \plus B} }$}
  \end{prooftree*}
  \else%
  \fi%
  \fi%
}
\newcommand{\cpInfWith}{%
  \begin{prooftree*}
    \AXC{$\seq[ P ]{ \Gamma , \tmty{x}{A} }$}
    \AXC{$\seq[ Q ]{ \Delta , \tmty{x}{B} }$}
    \SYM{(\with)}
    \BIC{$\seq[ \cpCase{x}{P}{Q} ]{ \Gamma , \Delta , \tmty{x}{A \with B} }$}
  \end{prooftree*}}
\newcommand{\cpInfNil}{%
  (no rule for \ty{\nil})}
\newcommand{\cpInfTop}{%
  \begin{prooftree*}
    \AXC{}
    \SYM{(\top)}
    \UIC{$\seq[ \cpAbsurd{x} ]{ \Gamma, \tmty{x}{\top} }$}
  \end{prooftree*}}
\newcommand{\ncInfTake}[1]{%
  \begin{prooftree*}
    \AXC{$\seq[{ P }]{ \Gamma , \tmty{y}{A} }$}
    \SYM{(\take[1]{})}
    \UIC{$\seq[{ \ncCnt{x}{y}{P} }]{ \Gamma , \tmty{x}{\take[1]{A}} }$}
  \end{prooftree*}}
\newcommand{\ncInfGive}[1]{%
  \begin{prooftree*}
    \AXC{$\seq[{ P }]{ \Gamma , \tmty{y}{A} }$}
    \SYM{(\give[1]{})}
    \UIC{$\seq[{ \ncSrv{x}{y}{P} }]{ \Gamma , \tmty{x}{\give[1]{A}} }$}
  \end{prooftree*}}
\newcommand{\ncInfCont}{%
  \begin{prooftree*}
    \AXC{$\seq[{ P }]{ \Gamma , \tmty{x}{\give[m]{A}} , \tmty{y}{\give[n]{A}} }$}
    \NOM{Cont}
    \UIC{$\seq[{ \cpSub{x}{y}{P} }]{ \Gamma , \tmty{x}{\give[m+n]{A}} }$}
  \end{prooftree*}}
\newcommand{\ncInfPool}{%
  \begin{prooftree*}
    \AXC{$\seq[{ P }]{ \Gamma , \tmty{x}{\take[m]{A}} }$}
    \AXC{$\seq[{ Q }]{ \Delta , \tmty{x}{\take[n]{A}} }$}
    \NOM{Pool}
    \BIC{$\seq[{ \ncPool{P}{Q} }]{ \Gamma , \Delta , \tmty{x}{\take[m+n]{A}} }$}
  \end{prooftree*}}

  
%%% Local Variables:
%%% TeX-master: "main"
%%% End:
