language: generic

dist: trusty
sudo: false

before_install:
  - export PATH=/tmp/texlive/bin/x86_64-linux:$PATH
  - make setup

cache:
  directories:
    - /tmp/texlive
    - $HOME/.texlive
    - /usr/share/fonts/opentype/fira_code
    - /usr/share/fonts/opentype/fira_mono
    - /usr/share/fonts/opentype/fira_sans

script:
  - make _build/release.zip

deploy:
  provider: releases
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  file: _build/release.zip
  on:
    repo: wenkokke/nodcap

